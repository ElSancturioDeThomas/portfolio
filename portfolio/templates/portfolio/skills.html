{% extends 'portfolio/base.html' %}

{% load static %}

{% block title %}Skills - Portfolio{% endblock %}

{% block content %}
    <section class="page-hero-section skills-hero-section">
        <img src="{% static 'portfolio/assets/TigersOnFire.png' %}?v={{ timestamp|default:'' }}" alt="Background" class="page-hero-image">
        <div class="page-hero-overlay"></div>
        <div class="skills-container">
            <!-- Skills Section -->
            <div class="skills-section">
                <h2>
                    Skills
                    {% if user.is_authenticated %}
                        <button class="add-button add-button-right" id="skills-add-btn" title="Add Skill">
                            <i class="fas fa-plus"></i>
                        </button>
                    {% endif %}
                </h2>
                
                {% for category, skills_list in skills_by_category %}
                    <div class="skill-category-group">
                        <h3 class="skill-category-heading">{{ category }}</h3>
                        <div class="skills-grid">
                            {% for skill in skills_list %}
                                <div class="skill-card glass-card glass-effect">
                                    <div class="skill-card-content">
                                        <h4 class="skill-card-title">{{ skill.name }}</h4>
                                        {% if skill.description %}
                                            <p class="skill-card-description">{{ skill.description }}</p>
                                        {% endif %}
                                    </div>
                                </div>
                            {% empty %}
                                <p class="no-skills-message">No skills in this category yet.</p>
                            {% endfor %}
                        </div>
                    </div>
                {% empty %}
                    <p class="no-skills-message">No skills available yet.</p>
                {% endfor %}
            </div>

        </div>
    </section>

    <!-- Add Skill Popup Panel -->
    <div class="skill-add-panel admin-panel admin-panel--center" id="skill-add-panel">
        <div class="skill-add-content admin-panel-content">
            <div class="skill-add-header admin-panel-header">
                <span class="skill-add-title admin-panel-title">add_skill.sh</span>
                <button class="skill-add-close-btn admin-panel-close-btn" id="skill-add-close-btn">×</button>
            </div>
            <form class="skill-add-form admin-panel-form" id="skill-add-form">
                <div class="skill-form-group admin-form-group">
                    <label for="skill-name">Name *</label>
                    <input type="text" id="skill-name" name="name" class="skill-input admin-input" value="" required>
                </div>
                <div class="skill-form-group admin-form-group">
                    <label for="skill-description">Description</label>
                    <textarea id="skill-description" name="description" class="skill-input skill-textarea admin-input admin-textarea" rows="3" placeholder="Brief description of the skill..."></textarea>
                </div>
                <div class="skill-form-group admin-form-group">
                    <label for="skill-category">Category</label>
                    <select id="skill-category" name="category" class="skill-input admin-input">
                        <option value="">Select a category</option>
                        <option value="Programming Languages">Programming Languages</option>
                        <option value="Packages">Packages</option>
                        <option value="Soft">Soft</option>
                        <option value="Hard">Hard</option>
                        <option value="Spoken Languages">Spoken Languages</option>
                    </select>
                </div>
                <button type="submit" class="skill-submit-btn admin-submit-btn">Submit</button>
            </form>
            <div class="skill-add-status admin-panel-status" id="skill-add-status" style="display: none;">
                <div class="skill-loading admin-loading" id="skill-loading">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">Submitting...</p>
                </div>
                <div class="skill-submitted admin-submitted" id="skill-submitted" style="display: none;">
                    <div class="verified-icon">✓</div>
                    <p class="verified-text">Submitted</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'portfolio/js/skill-add.js' %}"></script>
{% endblock %}

